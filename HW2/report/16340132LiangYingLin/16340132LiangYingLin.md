## PAOGD个人作业2-角色动画基础

## 题目介绍

+ #### 介绍
  PAOGD个人作业2-角色动画基础

  #### 开发环境
  Blender2.8 beta
  #### DeadLine: 4月12日 **22** 点
  #### 场景描述

  实现一个简单的行走循环动画

  ![HW2.gif](/../../HW2.gif "HW2.gif")


  #### Tips
  - 导入模型,得到角色网格（根目录下的stickman.obj或其他模型，可自己构造，在report中说明）
  - 在角色网格的基础上创建基础骨架(Armature)

  ![输入图片说明](https://gitee.com/uploads/images/2019/0404/155350_38fd066f_1194012.png "屏幕截图.png")
  - 为骨架添加约束器,利用反向运动学(Inverse Kinematics)实现腿部装配

  ![输入图片说明](https://gitee.com/uploads/images/2019/0404/155700_50b377db_1194012.png "屏幕截图.png")
  - 进入权重绘制(Weight Paint)模式修改顶点权重

  ![输入图片说明](https://gitee.com/uploads/images/2019/0404/160319_c684d7e8_1194012.png "屏幕截图.png")
  - 在动作编辑器(Action Editor)模式创建行走动作

  ![输入图片说明](https://gitee.com/uploads/images/2019/0404/160744_7db6398f_1194012.png "屏幕截图.png")
  - 利用姿态镜像使创建的动作可循环
  - 在NonLinear Animation模式下重复Walk动作

  ![输入图片说明](https://gitee.com/uploads/images/2019/0404/161454_76e6c449_1194012.png "屏幕截图.png")
  ![输入图片说明](https://gitee.com/uploads/images/2019/0404/161518_95378fbd_1194012.png "屏幕截图.png")
  - 添加曲线,并让小人沿着曲线行走
  - 合理地摆放、控制镜头

  #### 注意：
  - 渲染后的视频较大，不要求提交，若想提交建议转成gif格式再提交
  - 提交前请自己审核提交内容，是否按照目录结构要求提交，是否存在冲突等；
  - 请不要更改主目录下的内容，不要提交无关的文件（.keep文件、mac系统下的目录文件等);
  - 提交Pull Request前请先自行合并commit记录

## 实验过程

### 一. 导入模型并创建基础骨架

+ 编辑模式，视图显示页面，可以修改骨骼为透视状态，并可以改变状态

![1](C:\Users\asus\Desktop\1.png)

+ 物体模式，新建第一根骨头，并按G键放置在中间

+ 选中骨头的顶点按E挤出，并按Z使他沿z轴变化，完成身体主要部分的骨骼

  ![2](C:\Users\asus\Desktop\2.png)

+ 打开**X轴镜像**，并用shift+E进行挤出，可以看到左右两边都会出现骨头

  ![3](C:\Users\asus\Desktop\3.png)

  ![4](C:\Users\asus\Desktop\4.png)

+ 发现手臂不应该连在颈部骨骼，故这里需要**断开骨骼连接**。**alt+P**

  ![5](C:\Users\asus\Desktop\5.png)

+ G调整位置，并重复上述步骤，完成手部腿部的骨骼搭建，最终效果图如下

  ![6](C:\Users\asus\Desktop\6.png)



### 二. 为骨架添加约束器,利用反向运动学(Inverse Kinematics)实现腿部装配

+ E挤出新骨架

+ alt+p 清空父级，因为这只是个控制器

+ 进入姿态模式
  + 先选中新骨头，再选中膝盖下面的骨头。**shift+i**添加ik约束

![10](C:\Users\asus\Desktop\10.png)

+ 选中黄色骨头，消除ik骨对整个身体的影响，而是只影响小腿跟大腿

  + 在骨骼约束中调整影响的**链长为2**

  ![11](C:\Users\asus\Desktop\11.png)


现在整个身体就可以自由的活动了，**且拥有反向约束**。

但是会出现移动ik骨头的时候，腿部的活动不符合人类的日常，故需要新增加一条ik骨来限制膝盖的的朝向，使它不会出现“骨折”的情况。

+ 从膝盖关节挤出新骨头，并清空父子关系与断开连接alt+P.
+ 同样为大腿设置ik骨，链长为1.

![12](C:\Users\asus\Desktop\12.png)



### 三. 进入权重绘制(Weight Paint)模式修改顶点权重

+ 在物体模式下，同时选中骨骼与物品，按**CTRL+P**选择绑定骨骼自动权重

![7](C:\Users\asus\Desktop\7.png)

现在的效果是，在**姿态模式**旋转骨头，人也会跟着一起变化。

但是此时的变化并不是我们想要的，所以要进入**权重调整模式**

+ 选择权重绘制模式。选中人物，CTRL+TAB进入。

![8](C:\Users\asus\Desktop\8.png)



+ shift+右键来选中某块骨骼的影响区域，利用笔刷的weight属性来进行调整。
  + 当weight为0的时候表示骨骼对其无影响，显示蓝色
  + 当weight为1的时候表示骨骼对其完全影响，显示红色
  + 当weight为0到1之间的时候表示骨骼对其影响的程度，显示蓝色到红色之间

![9](C:\Users\asus\Desktop\9.png)

### 四. 在动作编辑器(Action Editor)模式创建行走动作

+ **A选中所有骨架，alt+G恢复原来的姿势**
+ 在**动画编辑器**中选中**动作编辑器**

  ![输入图片说明](https://gitee.com/uploads/images/2019/0404/160744_7db6398f_1194012.png "屏幕截图.png")



添加五个动作

+ 站直
+ 左脚抬起 右手抬起
+ 站直
+ 右脚抬起 左手抬起
+ 站直

这样子就完成了一个简单的移动动作构建

![13](C:\Users\asus\Desktop\13.png)



### 五.在NonLinear Animation模式下重复Walk动作

  ![输入图片说明](https://gitee.com/uploads/images/2019/0404/161454_76e6c449_1194012.png "屏幕截图.png")



+ 添加多个相同动作action在NLA中可以看出，它在重复走路这个动作

![14](C:\Users\asus\Desktop\14.png)

![15](C:\Users\asus\Desktop\15.png)

### 六.添加曲线,并让小人沿着曲线行走


  ![输入图片说明](https://gitee.com/uploads/images/2019/0404/161518_95378fbd_1194012.png "屏幕截图.png")

+ shift + a添加曲线
+ 物体模式下选中人物与骨骼使得人物跟随曲线来进行运动

![16](C:\Users\asus\Desktop\16.png)



## 实验结果

最后完成的效果如图所示：

![20190410_204411](C:\Users\asus\Desktop\20190410_204411.gif)

## 实验感想

​	这次实验感觉难度比较大，从一开始对于骨骼的构建到后面对于人物动画的添加对于我来说都是挑战重重。但是通过阅读手册加上对于教学视频的观看，学会了基本的人物骨骼的搭建，了解如何去绑定骨头，限制骨头的作用范围，利用IK来控制骨头的方向。除此之外，对于权重绘制方面也有了一定的了解，我学会了自动权重以及手工调整每根骨头的作用范围，使得人物更加自然真实。最后对于动画部分就需要一点耐心去摆动姿势形成关键帧，并利用NLA来形成连续的动作过程。通过这次实验，我对于blender的操作更加熟悉了，了解到了各个模式下的不同处理方式，也学会了更多的快捷键，上手明显比第一次实验有进步。